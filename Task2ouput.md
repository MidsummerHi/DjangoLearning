## Task2output

### ä¸€ã€æ„å»ºæ•°æ®è¡¨

#### 1.1 å¸¸è§é—®é¢˜

1. ##### models.pyæ˜¯ä»€ä¹ˆï¼Ÿæœ‰å•¥ç”¨ï¼Ÿ

   åœ¨Djangoæ¡†æ¶ä¸­ï¼Œ`models.py` æ–‡ä»¶æ˜¯ç”¨æ¥å®šä¹‰**æ•°æ®æ¨¡å‹**çš„ã€‚æ•°æ®æ¨¡å‹ä»£è¡¨äº†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä½¿ç”¨çš„**æ•°æ®ç»“æ„**ï¼Œå®ƒä»¬ä¸æ•°æ®åº“ä¸­çš„è¡¨ç›¸å¯¹åº”ï¼Œæ‰€ä»¥å¦‚æœå­¦ä¹ è¿‡æ•°æ®åº“åŒå­¦ï¼Œå…¶å®ä¸ç”¨è§£é‡Šï¼Œçœ‹åˆ°ä»£ç å°±çŸ¥é“å¹²å•¥ç”¨çš„äº†ã€‚

   åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æˆ‘ä»¬å¸¸ä¼šå®šä¹‰å‡ ä¸ªç±»ï¼Œæ¯ä¸ªç±»ä»£è¡¨1å¼ è¡¨ï¼Œæ¯”å¦‚å­¦ç”Ÿä¿¡æ¯è¡¨ï¼Œå·¥èµ„å‘æ”¾è¡¨ï¼Œ å€¼ç­è½®è¯¢è¡¨ç­‰ç­‰ã€‚

2. ##### ä»€ä¹ˆæ˜¯æ•°æ®æ¨¡å‹ï¼Ÿ

   åœ¨ Djangoä¸­ï¼Œæ•°æ®æ¨¡å‹æ˜¯ä¸€ç§ç”¨äºè¡¨ç¤ºå’Œæ“ä½œæ•°æ®åº“ä¸­æ•°æ®çš„**æŠ½è±¡å±‚**ã€‚æ•°æ®æ¨¡å‹å®šä¹‰äº†**æ•°æ®çš„ç»“æ„**ã€**æ•°æ®ä¹‹é—´çš„å…³ç³»**ä»¥åŠå¦‚ä½•ä¸æ•°æ®åº“è¿›è¡Œ**äº¤äº’**ã€‚

   æ•°æ®æ¨¡å‹ç”±ä¸€ç³»åˆ—çš„**ç±»**ç»„æˆï¼Œæ¯ä¸ªç±»å¯¹åº”åˆ°æ•°æ®åº“ä¸­çš„ä¸€ä¸ª**è¡¨**ï¼Œç±»çš„å±æ€§æ˜ å°„åˆ°è¡¨çš„**åˆ—**ã€‚

   æ•°æ®æ¨¡å‹çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š

   1. **å­—æ®µï¼ˆFieldsï¼‰**ï¼šæ¯ä¸ªæ¨¡å‹éƒ½æ˜¯ä¸€ç³»åˆ—å­—æ®µçš„é›†åˆï¼Œæ¯ä¸ªå­—æ®µéƒ½å¯¹åº”æ•°æ®åº“è¡¨ä¸­çš„ä¸€ä¸ªåˆ—ã€‚å­—æ®µå¯ä»¥æ˜¯ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œå¦‚æ•´æ•°ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰ã€‚
   2. **å…ƒæ•°æ®ï¼ˆMetadataï¼‰**ï¼šæ¨¡å‹è¿˜åŒ…æ‹¬å…ƒæ•°æ®ï¼Œå¦‚æ•°æ®åº“è¡¨åã€äººç±»å¯è¯»çš„åç§°ç­‰ã€‚
   3. **å…³ç³»ï¼ˆRelationshipsï¼‰**ï¼šæ¨¡å‹å¯ä»¥å®šä¹‰ä¸å…¶ä»–æ¨¡å‹çš„å…³ç³»ï¼Œå¦‚ä¸€å¯¹ä¸€ï¼ˆOneToOneFieldï¼‰ã€ä¸€å¯¹å¤šï¼ˆForeignKeyï¼‰å’Œå¤šå¯¹å¤šï¼ˆManyToManyFieldï¼‰å…³ç³»ã€‚
   4. **æ“ä½œï¼ˆOperationsï¼‰**ï¼šDjango æä¾›äº†ä¸€å¥—è‡ªåŠ¨ç”Ÿæˆçš„æ•°æ®åº“è®¿é—® APIï¼Œå…è®¸æˆ‘ä»¬é€šè¿‡æ¨¡å‹è¿›è¡Œåˆ›å»ºã€æ£€ç´¢ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚
   5. **è¿ç§»ï¼ˆMigrationsï¼‰**ï¼šDjango çš„è¿ç§»ç³»ç»Ÿå…è®¸æˆ‘ä»¬æ ¹æ®å¯¹æ¨¡å‹çš„ä¿®æ”¹è‡ªåŠ¨ç”Ÿæˆå’Œåº”ç”¨æ•°æ®åº“è¿ç§»ï¼Œè¿™ä½¿å¾—ç®¡ç†æ•°æ®åº“æ¨¡å¼å˜å¾—éå¸¸æ–¹ä¾¿ã€‚

3. ##### æš‚æ—¶æƒ³ä¸åˆ°äº†ğŸ˜‚

æˆ‘ä»¬å¸Œæœ›è¯»è€…å¯¹æ•™ç¨‹ä¸­çš„æ­¥éª¤éƒ½æ˜¯ç†è§£çš„ï¼Œè€Œä¸æ˜¯æœºæ¢°å¯¹ç€é«‚ä»£ç ï¼Œé‚£æ ·çš„å­¦ä¹ æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚

å› æ­¤ï¼Œè¾¾åˆ°ä»¥ä¸Šçš„ç›®çš„ï¼Œåœ¨æ­£å¼æ„å»ºæ•°æ®è¡¨ä¹‹å‰æˆ‘ä»¬å°†ä»‹ç»ä¸€äº›å…ˆéªŒçŸ¥è¯†

#### 1.2 å­—æ®µ

æ¯ä¸ªæ¨¡å‹éƒ½æ˜¯ä¸€ç³»åˆ—å­—æ®µçš„é›†åˆï¼Œæ¯ä¸ªå­—æ®µéƒ½å¯¹åº”æ•°æ®åº“è¡¨ä¸­çš„ä¸€ä¸ª**åˆ—**ï¼›å­—æ®µå¯ä»¥æ˜¯ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œå¦‚æ•´æ•°ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰ã€‚

| Field           | ç”¨é€”                                                         |
| --------------- | ------------------------------------------------------------ |
| CharField       | ç”¨äºå­˜å‚¨å­—ç¬¦ä¸²ç±»å‹ï¼Œæœ‰æœ€å¤§é•¿åº¦é™åˆ¶                           |
| IntegerField    | ç”¨äºå­˜å‚¨æ•´æ•°ç±»å‹                                             |
| FloatField      | ç”¨äºå­˜å‚¨æµ®ç‚¹æ•°ç±»å‹                                           |
| BooleanField    | ç”¨äºå­˜å‚¨å¸ƒå°”ç±»å‹                                             |
| DateField       | ç”¨äºå­˜å‚¨æ—¥æœŸç±»å‹                                             |
| DateTimeField   | ç”¨äºå­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ç±»å‹                                       |
| ImageField      | ç”¨äºå­˜å‚¨å›¾ç‰‡ç±»å‹                                             |
| FileField       | ç”¨äºå­˜å‚¨æ–‡ä»¶ç±»å‹                                             |
| ForeignKey      | å¤–é”® ç”¨äºè¡¨ç¤ºæ•°æ®åº“è¡¨ä¹‹é—´çš„å…³è”å…³ç³»                          |
| OneToOneField   | ç”¨äºè¡¨ç¤ºæ•°æ®åº“è¡¨ä¹‹é—´çš„ä¸€å¯¹ä¸€å…³ç³»ï¼Œæ¯”å¦‚ç”¨æˆ·è¡¨çš„ç”¨æˆ·ååœ¨ç”¨æˆ·è¯¦ç»†ä¿¡æ¯è¡¨ä¸­æœ‰å”¯ä¸€çš„æ¡ç›® |
| ManyToManyField | å¤šå¯¹å¤š ç”¨äºè¡¨ç¤ºæ•°æ®åº“è¡¨ä¹‹é—´å¤šå¯¹å¤šçš„å…³è”å…³ç³»ï¼Œæ¯”å¦‚ä¸€ä¸ªå­¦ç”Ÿå¯ä»¥å¯¹åº”å¤šä¸ªå¿…é¡»è¯¾ç¨‹ |

#### 1.3 å­—æ®µçš„å¯è®¾ç½®å±æ€§

| é€‰é¡¹         | æè¿°                                                         |
| ------------ | ------------------------------------------------------------ |
| primary_key  | å­—æ®µæ˜¯å¦ä¸ºä¸»é”®ï¼Œé»˜è®¤ä¸º Falseã€‚                               |
| max_length   | å­—æ®µçš„æœ€å¤§é•¿åº¦é™åˆ¶ï¼Œå¯ä»¥åº”ç”¨äºå¤šç§ä¸åŒçš„å­—æ®µç±»å‹ã€‚           |
| verbose_name | å­—æ®µçš„å‹å¥½åç§°ï¼Œåœ¨ç®¡ç†ç•Œé¢æˆ–æ•°æ®åº“ä¸­ä»£æ›¿åŸå§‹å­—æ®µçš„åç§°æ¥æ˜¾ç¤ºã€‚ |
| default      | æŒ‡å®šå­—æ®µçš„é»˜è®¤å€¼ã€‚                                           |
| null         | æŒ‡å®šå­—æ®µæ˜¯å¦å¯ä»¥ä¸ºç©ºã€‚`null=True` è®¾ç½®å…è®¸è¯¥å­—æ®µä¸º NULL å€¼ã€‚ |
| blank        | æŒ‡å®šåœ¨è¡¨å•ä¸­è¾“å…¥æ—¶æ˜¯å¦å¯ä»¥ä¸ºç©ºç™½ã€‚                           |
| choices      | ç”¨äºæŒ‡å®šå­—æ®µçš„å¯é€‰å€¼æšä¸¾åˆ—è¡¨                                 |
| editable     | æ˜¯å¦å¯ç¼–è¾‘ï¼Œé»˜è®¤ä¸ºTrueï¼Œè¡¨ç¤ºå­—æ®µåœ¨è¡¨å•ä¸­å¯ä»¥ç¼–è¾‘ã€‚           |
| unique       | å­—æ®µæ˜¯å¦å”¯ä¸€ï¼Œé»˜è®¤ä¸º Falseã€‚                                 |

#### 1.4 åˆ›å»ºä¸¤ä¸ªæ•°æ®è¡¨

è¿›å…¥ç¨‹åºç›®å½•ï¼Œæ‰“å¼€models.pyæ–‡ä»¶ï¼Œç„¶ååˆ›å»ºä¸¤ä¸ªæ•°æ®è¡¨ï¼Œä»£ç å¦‚ä¸‹ï¼š

```python
from django.db import models 


class GoodsCategory(models.Model):
    # å®šä¹‰å•†å“ç±»åˆ«æ¨¡å‹ç±»
    name = models.CharField(max_length=64, verbose_name='åç§°')                             # æœ€å¤§é•¿åº¦ä¸º64ï¼Œç½‘é¡µæ˜¾ç¤ºä¸ºâ€œå¤‡æ³¨â€
    # æœ€å¤§é•¿åº¦ä¸º256ï¼Œå¯ä»¥ä¸ºç©ºå€¼, è¡¨å•å¡«å†™å¯ä»¥ä¸ºç©ºï¼Œç½‘é¡µæ˜¾ç¤ºä¸ºâ€œå¤‡æ³¨â€
    remark = models.CharField(max_length=256, null=True, blank=True, verbose_name='å¤‡æ³¨')


class Goods(models.Model):
    # å®šä¹‰å•†å“æ¨¡å‹ç±»
    number = models.CharField(max_length=32, verbose_name='ç¼–å·')                           # ç¼–å·å­—æ®µï¼Œæœ€å¤§é•¿åº¦ä¸º32ï¼Œç½‘é¡µæ˜¾ç¤ºä¸ºâ€œç¼–å·â€
    name = models.CharField(max_length=64, verbose_name='åç§°')                             # åç§°å­—æ®µï¼Œæœ€å¤§é•¿åº¦ä¸º64ï¼Œç½‘é¡µæ˜¾ç¤ºä¸ºâ€œåç§°â€
    barcode = models.CharField(max_length=32, null=True, blank=True, verbose_name='æ¡ç ')   # æ¡ç å­—æ®µï¼Œæœ€å¤§é•¿åº¦ä¸º32ï¼Œç½‘é¡µæ˜¾ç¤ºä¸ºâ€œæ¡ç â€
    # å¤–é”®å­—æ®µï¼ŒæŒ‡å‘GoodsCategoryè¡¨ï¼Œä¸€æ—¦GoodsCategoryä¸­ç±»åˆ«è¢«åˆ é™¤ï¼Œè¯¥è¡¨å¯¹åº”å®Œæˆåˆ é™¤ï¼ˆçº§è”åˆ é™¤ï¼‰ï¼Œå¯ä»¥ä¸ºç©ºå€¼
    # è¿™ä¸ªå‚æ•°å®šä¹‰äº†åå‘å…³ç³»çš„åç§°ã€‚åœ¨ GoodsCategory æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ category.goods_set æ¥è·å–å±äºè¯¥åˆ†ç±»çš„æ‰€æœ‰å•†å“ã€‚
    category = models.ForeignKey(to='GoodsCategory', on_delete=models.SET_NULL, null=True, related_name='goods_set', verbose_name='äº§å“åˆ†ç±»')
    # è§„æ ¼å­—æ®µï¼Œæœ€å¤§é•¿åº¦ä¸º64ï¼Œå¯ä»¥ä¸ºç©ºï¼Œè¡¨å•å¡«å†™å¯ä»¥ä¸ºç©ºï¼Œç½‘é¡µæ˜¾ç¤ºä¸ºâ€œè§„æ ¼â€
    spec = models.CharField(max_length=64, null=True, blank=True, verbose_name='è§„æ ¼')
    purchase_price = models.FloatField(default=0, verbose_name='é‡‡è´­ä»·')                     # é‡‡è´­ä»·æ ¼å­—æ®µï¼Œé»˜è®¤å€¼ä¸º0
    retail_price = models.FloatField(default=0, verbose_name='é›¶å”®ä»·')                       # é›¶å”®ä»·æ ¼å­—æ®µï¼Œé»˜è®¤å€¼ä¸º0
    # å¤‡æ³¨å­—æ®µï¼Œæœ€å¤§é•¿åº¦ä¸º256ï¼Œå¯ä»¥ä¸ºç©ºï¼Œè¡¨å•å¡«å†™å¯ä»¥ä¸ºç©ºï¼Œç½‘é¡µæ˜¾ç¤ºä¸ºâ€œå¤‡æ³¨â€
    remark = models.CharField(max_length=256, null=True, blank=True, verbose_name='å¤‡æ³¨')

```

æœ‰äº†å…ˆåºçŸ¥è¯†ï¼Œæˆ‘ç›¸ä¿¡æ­¤æ—¶ä»£ç çœ‹èµ·æ¥ç®€ç›´ä¸è¦å¤ªç®€å•ã€‚

å¦‚æœä¸Šè¿°ä»£ç æœ‰ä¸€ä¸ªè´¹è§£çš„å‚æ•°ï¼Œé‚£å¯èƒ½æ˜¯ä¸‹é¢è¿™ä¸€è¡Œ

```python
category = models.ForeignKey(to='GoodsCategory', on_delete=models.SET_NULL, null=True, related_name='goods_set', verbose_name='äº§å“åˆ†ç±»')
```

è¿™ä¸€è¡Œçš„ã€related_name='goods_set'ã€‘ä½ æ˜¯å¦çœ‹æ‡‚äº†å‘¢ï¼Ÿæˆ‘æƒ³åº”è¯¥æ²¡æœ‰ï¼Œå®ƒæ˜¯ç”¨æ¥è®¾ç½®ä¸€ä¸ªåå‘å…³ç³»ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå•†å“ç±»åˆ«çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªåå‘å…³ç³»åå­—ï¼Œè·å–è¯¥ç±»åˆ«çš„æ‰€æœ‰å•†å“ä¿¡æ¯ï¼Œä¸‹é¢æ˜¯å‚è€ƒä»£ç ï¼š

```python
# category æ˜¯ä¸€ä¸ª GoodsCategory å®ä¾‹
category = GoodsCategory.objects.get(name='ç”µå­äº§å“')

# è·å–å±äºè¿™ä¸ªç±»åˆ«çš„æ‰€æœ‰å•†å“
goods = category.goods_set.all()

```

ç°åœ¨å¥½ç†è§£å¤šäº†å§ï¼

#### 1.5 æ•°æ®åº“æ›´æ”¹ä¸è¿ç§»

åœ¨**å·¥ç¨‹ç›®å½•**ä¸‹è¿è¡Œä»¥ä¸‹ä¸¤æ¡å‘½ä»¤

```python
python manage.py makemigrations
```

è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯æ£€æŸ¥æˆ‘ä»¬çš„æ¨¡å‹æ–‡ä»¶ï¼ˆ `models.py`ï¼‰ï¼Œæ‰¾å‡ºè‡ªä»ä¸Šæ¬¡è¿ç§»ä»¥æ¥æ¨¡å‹æ–‡ä»¶å‘ç”Ÿçš„å˜åŒ–ï¼Œæ¯”å¦‚æ·»åŠ äº†æ–°çš„æ¨¡å‹ã€å­—æ®µæˆ–è€…ä¿®æ”¹äº†å­—æ®µç±»å‹ç­‰ï¼Œç„¶åä¸ºè¿™äº›å˜åŒ–åˆ›å»ºä¸€ä¸ªæ–°çš„è¿ç§»æ–‡ä»¶ï¼ˆå­˜æ”¾åœ¨**ç¨‹åºç›®å½•**ä¸‹çš„`migrations`å­ç›®å½•ä¸‹ï¼‰ã€‚

è¿™ä¸ªè¿ç§»æ–‡ä»¶æ˜¯ä¸€ä¸ª Python è„šæœ¬ï¼Œå®ƒåŒ…å«äº†è¶³å¤Ÿçš„ä¿¡æ¯æ¥ä¿®æ”¹æ•°æ®åº“ï¼Œä½¿å…¶ä¸æ¨¡å‹ä¿æŒä¸€è‡´ã€‚

```python
python manage.py migrate
```

è¿™ä¸ªå‘½ä»¤åˆ™è´Ÿè´£æ‰§è¡Œå‰é¢ç”±ã€python manage.py makemigrationsã€‘ å‘½ä»¤åˆ›å»ºçš„è¿ç§»æ–‡ä»¶ï¼Œå°†è¿ç§»åº”ç”¨åˆ°æ•°æ®åº“ä¸­ã€‚

ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æ ¹æ®è¿ç§»æ–‡ä»¶ä¸­çš„æŒ‡ç¤ºï¼Œå¯¹æ•°æ®åº“è¿›è¡Œæ›´æ–°ï¼Œæ·»åŠ æˆ–åˆ é™¤è¡¨æ ¼ã€å­—æ®µç­‰ï¼Œä»¥åŒ¹é…å½“å‰çš„æ¨¡å‹ç»“æ„ï¼Œä»¥è®©æ•°æ®åº“å’Œæœ€æ–°æ•°æ®ä¿æŒåŒæ­¥ã€‚

### äºŒã€ç®¡ç†å‘˜çš„åˆ›å»ºä¸ç™»å½•

#### 2.1 åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·

åœ¨**å·¥ç¨‹ç›®å½•**ä¸‹è¿è¡Œå¦‚ä¸‹å‘½ä»¤

```cmd
python manage.py createsuperuser
```

ä¸Šè¿°å‘½ä»¤è§£é‡Šä¸ºåˆ›å»ºä¸€ä¸ªè¶…çº§ç”¨æˆ·ï¼Œå³ç®¡ç†å‘˜ï¼Œè¿è¡Œåå›è½¦ä¼šä¸æ–­è®©æˆ‘ä»¬è¾“å…¥ä¸€äº›å¿…è¦çš„ä¿¡æ¯ï¼Œè¯»è€…ä¿ºå¼•å¯¼ä¾¿å¯å®Œæˆæ“ä½œï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```cmd
(erp_venv) D:\Software\HUNNU CloudDisk\Cache\å½­å½©å¹³_1\æˆ‘çš„èµ„æ–™åº“\å¼€æºåŠ©æ•™\Django\MyFirstProject>python manage.py createsuperuser
Username: midsummer
Email address: 331XXX5430@qq.com        
Password:
Password (again):
Superuser created successfully.
```

å…¶ä¸­ï¼Œè¾“å…¥å¯†ç æ—¶ï¼Œæ˜¯ä¸ä¼šæ˜¾ç¤ºå¯†ç çš„ï¼Œæ³¨æ„åˆ«æ‰“é”™äº†ã€‚

#### 2.2 é…ç½®æ¨¡å‹

è¿›å…¥**ç¨‹åºç›®å½•**ä¸‹ï¼Œæ‰“å¼€`admin.py`,é»˜è®¤ç¨‹åºæ˜¯ç©ºçš„å¦‚ä¸‹æ‰€ç¤ºï¼š

```python
from django.contrib import admin

# Register your models here.
```

éœ€è¦è‡ªå·±æ·»åŠ å†…å®¹ï¼Œæ“ä½œæ˜¯æ³¨å†Œæ¨¡å‹ï¼Œæ—¢ç„¶æ˜¯æ³¨å†Œæ¨¡å‹ï¼Œé‚£ä¹ˆå°±è¦å¯¼å…¥å’Œæˆ‘ä»¬`admin.py`**ç¨‹åºç›®å½•**ä¸‹çš„`models.py`æ¨¡å—ï¼Œæ€ä¹ˆå¯¼å…¥ï¼Œä»¥åŠå…¶å«ä¹‰å‡åŒ…å«åœ¨ä»£ç æ³¨é‡Šä¸­ã€‚

```python
from django.contrib import admin
from .models import *               # ä»åŒçº§ç›®å½•ä¸‹å¯¼å…¥modelsæ¨¡å—

# Register your models here.
admin.site.register(Goods)          # æ³¨å†ŒGoodsè¡¨
admin.site.register(GoodsCategory)  # æ³¨å†ŒGoodsCategoryè¡¨ 
```

#### 2.3 ç®¡ç†å‘˜ç™»å½•

é¦–å…ˆï¼Œè®©æ§åˆ¶å°è¿›å…¥**å·¥ç¨‹ç›®å½•**ï¼Œç„¶åè¿è¡Œå¯åŠ¨æœåŠ¡çš„å‘½ä»¤

```cmd
python manage.py runserver
```

ä¸‹é¢æ˜¯æˆ‘çš„å¯åŠ¨ç¤ºä¾‹ï¼Œä¸‹é¢ä¼šç»™å‡ºæµè§ˆå™¨çš„è®¿é—®åœ°å€

```cmd
(erp_venv) D:\Software\HUNNU CloudDisk\Cache\å½­å½©å¹³_1\æˆ‘çš„èµ„æ–™åº“\å¼€æºåŠ©æ•™\Django\MyFirstProject>python manage.py runserver
Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
May 17, 2024 - 00:49:24
Django version 5.0.6, using settings 'MyFirstProject.settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK.
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¹‹å‰æˆ‘ä»¬éƒ½æ˜¯è®¿é—®ç«™ç‚¹çš„æ ¹ç›®å½•ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬æ—¢ç„¶è¦ç™»å½•ç®¡ç†å‘˜è´¦æˆ·ï¼Œå°±ä¸èƒ½æ˜¯è®¿é—®æ ¹ç›®å½•äº†ï¼Œè€Œæ˜¯è¦è®¿é—®ç®¡ç†å‘˜ç›®å½•ã€‚

ä»¥ä¸Šé¢è¾“å…¥å†…å®¹ä¸ºä¾‹ï¼Œæ ¹ç›®å½•è®¿é—®åœ°å€ï¼š

```python
http://127.0.0.1:8000/
```

é‚£ä¹ˆï¼Œç®¡ç†å‘˜è®¿é—®åœ°å€æ˜¯å¦‚ä¸‹åœ°å€ï¼š

```python
http://127.0.0.1:8000/admin
```

æ¥ç€æµè§ˆå™¨å°†æŒ‘æˆ˜åˆ°ç™»å½•ç•Œé¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![image-20240517005439717](assets/image-20240517005439717.png)

è¾“å…¥ç”¨æˆ·åå¯†ç ç‚¹å‡»`Log in`å³å¯è¿›å…¥ç®¡ç†å‘˜åå°ã€‚

### ä¸‰ã€å¤–é”®æµ‹è¯•

#### 3.1 å®šä¹‰å¤–é”®

å¦‚æœä½ è¿˜è®°å¾—çš„è¯ï¼Œå‰é¢æˆ‘ä»¬çš„`Goods`è¡¨æ˜¯å®šä¹‰äº†å¤–é”®çš„ï¼Œå¦‚æœä¸è®°å¾—äº†ï¼Œé‚£å°±å†çœ‹çœ‹å§ï¼š

```python
from django.db import models 


class GoodsCategory(models.Model):
    # å®šä¹‰å•†å“ç±»åˆ«æ¨¡å‹ç±»
    name = models.CharField(max_length=64, verbose_name='åç§°')                             # æœ€å¤§é•¿åº¦ä¸º64ï¼Œç½‘é¡µæ˜¾ç¤ºä¸ºâ€œå¤‡æ³¨â€
    # æœ€å¤§é•¿åº¦ä¸º256ï¼Œå¯ä»¥ä¸ºç©ºå€¼, è¡¨å•å¡«å†™å¯ä»¥ä¸ºç©ºï¼Œç½‘é¡µæ˜¾ç¤ºä¸ºâ€œå¤‡æ³¨â€
    remark = models.CharField(max_length=256, null=True, blank=True, verbose_name='å¤‡æ³¨')


class Goods(models.Model):
    Â·Â·Â·
    # å¤–é”®å­—æ®µï¼ŒæŒ‡å‘GoodsCategoryè¡¨ï¼Œä¸€æ—¦GoodsCategoryä¸­ç±»åˆ«è¢«åˆ é™¤ï¼Œè¯¥è¡¨å¯¹åº”å®Œæˆåˆ é™¤ï¼ˆçº§è”åˆ é™¤ï¼‰ï¼Œå¯ä»¥ä¸ºç©ºå€¼
    # è¿™ä¸ªå‚æ•°å®šä¹‰äº†åå‘å…³ç³»çš„åç§°ã€‚åœ¨ GoodsCategory æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ category.goods_set æ¥è·å–å±äºè¯¥åˆ†ç±»çš„æ‰€æœ‰å•†å“ã€‚
    category = models.ForeignKey(to='GoodsCategory', on_delete=models.SET_NULL, null=True, related_name='goods_set', verbose_name='äº§å“åˆ†ç±»')
    Â·Â·Â·
```

#### 3.2 ç¼–å†™è§†å›¾ï¼ˆViewï¼‰

æ€»æ‰€å‘¨çŸ¥ï¼Œç¨‹åºå¿…é¡»è¦æœ‰è¾“å…¥å’Œè¾“å‡ºï¼Œé‚£ä¹ˆä¸‹é¢æˆ‘ä»¬å°†ç¼–å†™ä¸¤ä¸ª2ä¸ªAPIï¼Œå®Œæˆé€šè¿‡åˆ†ç±»åå­—æŸ¥è¯¢è¯¥åˆ†ç±»æ‰€æœ‰å¯¹è±¡çš„åŠŸèƒ½ã€‚

ç”±äºç›®å‰æˆ‘çš„æ•°æ®è¡¨è¿˜æ²¡æœ‰ä»»ä½•æ•°æ®ï¼Œå› æ­¤å°±ä¸å­˜åœ¨ä»»ä½•æ•°æ®å¤„ç†äº†ï¼ŒAPIä¸­å®ç°äº†å¯¹POSTå’ŒGETçŠ¶æ€çš„åé¦ˆï¼Œåé¢æˆ‘ä»¬å¯ä»¥é€šè¿‡ç½‘é¡µçœ‹åˆ°å®é™…æ•ˆæœã€‚

```python
from django.shortcuts import render, get_object_or_404  
from rest_framework.response import Response 
from rest_framework.decorators import api_view 
from .models import GoodsCategory                   # ä»å½“å‰åº”ç”¨çš„modelsæ¨¡å—ä¸­å¯¼å…¥GoodsCategoryæ¨¡å‹

# Create your views here.  

# Insert or retrieve GoodsCategory  


@api_view(['POST', 'GET'])                          # å°†InsertGoodsCategoryå‡½æ•°å£°æ˜ä¸ºå¤„ç†POSTå’ŒGETè¯·æ±‚çš„APIè§†å›¾
def InsertGoodsCategory(request):                   # å®šä¹‰InsertGoodsCategoryè§†å›¾å‡½æ•°
    category_name = request.data.get('åˆ†ç±»åå­—')    
    if not category_name:                        
        return Response({"error": "åˆ†ç±»åå­—æ˜¯å¿…å¡«é¡¹"}, status=400)  # è¿”å›é”™è¯¯å“åº”ï¼ŒçŠ¶æ€ç 400
    # è·å–åˆ†ç±»å¯¹è±¡æˆ–åˆ›å»ºæ–°çš„åˆ†ç±»å¯¹è±¡
    category, created = GoodsCategory.objects.get_or_create(name=category_name)  # æ ¹æ®åå­—è·å–æˆ–åˆ›å»ºGoodsCategoryå¯¹è±¡
    # åˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨åˆ†ç±»
    if not created:  
        return Response({"status": "å·²å­˜åœ¨", "goods_category": category_name}, status=200)  # è¿”å›å·²å­˜åœ¨çš„å“åº”ï¼ŒçŠ¶æ€ç 200
    else:  
        return Response({"message": f"Successfully inserted category '{category_name}'."})  # è¿”å›æˆåŠŸæ’å…¥çš„å“åº”


@api_view(['POST', 'GET'])  
def FilterGoodsCategory(request): 
    data = request.data.get('åˆ†ç±»åå­—') 
    goods = GoodsCategory.objects.filter(name=data)  # è¿‡æ»¤å‡ºåå­—ä¸ºdataçš„GoodsCategoryå¯¹è±¡
    if goods.exists():  # å¦‚æœå­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å¯¹è±¡
        return Response({"status": "å·²å­˜åœ¨", "goods_category": data}, status=200)  # è¿”å›å·²å­˜åœ¨çš„å“åº”ï¼ŒçŠ¶æ€ç 200
    else:  # å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å¯¹è±¡
        return Response({"status": "ä¸å­˜åœ¨", "goods_category": data}, status=404)  # è¿”å›ä¸å­˜åœ¨çš„å“åº”ï¼ŒçŠ¶æ€ç 404

```

#### 3.3 é¡µé¢è®¿é—®

åœ¨å·¥ç¨‹ç›®å½•ä¸‹è¿è¡Œå¯åŠ¨æœåŠ¡å‘½ä»¤

```cmd
python manage.py runserver
```

ç„¶åä¼šå¾—åˆ°ä¸€ä¸ªè®¿é—®åœ°å€ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯

```python
 http://127.0.0.1:8000/
```

è‹¥éœ€è¦è®¿é—®è¿‡æ»¤å•†å“çš„é¡µé¢ï¼Œåˆ™éœ€è¦ä½¿ç”¨ä»¥ä¸‹åœ°å€ï¼š

```python
 http://127.0.0.1:8000/filtergoodscategory/
```

![image-20240517031835357](assets/image-20240517031835357.png)

è‹¥éœ€è¦è®¿é—®å•†å“çš„é¡µé¢ï¼Œåˆ™éœ€è¦ä½¿ç”¨ä»¥ä¸‹åœ°å€ï¼š

```python
 http://127.0.0.1:8000/insertgoodscategory/
```

![image-20240517032230555](assets/image-20240517032230555.png)